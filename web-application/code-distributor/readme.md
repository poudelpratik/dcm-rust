# Code Distributor (Server)

This is the server side code distributor component of DCM-RUST architecture.

## Installation and Usage

### Via Docker

#### Building the Image

Run the following command in code-distributor's root directory to build the image:

```bash
docker build -t code-distributor .
```

A build argument can be passed to the Docker build command to specify whether to build the code-distributor in debug or
release mode.
Below is an example of building the code-distributor in release mode.

```bash
docker build -t code-distributor --build-arg BUILD_MODE=release .
```

The default is debug mode if 'BUILD_MODE' argument is not specified.

#### Running the Image

Either execute:

```bash
docker run code-distributor
```

and manually supply environment variables in command line.
Or, create a 'docker-compose.yml', define the environment variables there, and execute:

```bash
docker compose up
```

## Supplying Configuration

Following is a list of configuration variables that can be supplied to the code-distributor:

- `app_host`:
    - The host address on which the server will listen for incoming connections.
    - It is an optional parameter. If not provided, the server will listen on all addresses.
- `app_port`:
    - The port number on which the server will listen for incoming connections.
    - It is an optional parameter. If not provided, the server will listen on port 8082.
- `api_key`:
    - The API key that will be used to authenticate the client.
    - It is a mandatory parameter.
- `fragments_dir`:
    - The path to the directory where the WebAssembly modules generated by the wasm-generator are stored. It is a
      mandatory parameter.
 
